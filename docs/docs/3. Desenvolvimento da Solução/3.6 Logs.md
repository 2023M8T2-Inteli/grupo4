# Logs de Dados

Logs são registros de eventos que acontecem dentro de um software ou sistema. Eles são fundamentais para o monitoramento, depuração e rastreamento de atividades, fornecendo informações detalhadas sobre o comportamento e o estado do sistema.

## Importância dos Logs

Logs são vitais para:

- **Depuração**: Identificar e corrigir bugs.
- **Monitoramento**: Acompanhar o desempenho e a saúde do sistema.
- **Auditoria de Segurança**: Rastrear acessos e alterações para segurança.
- **Análise de Dados**: Coletar informações para análises estatísticas e de negócios.

## Tipos de Logs

Há vários tipos de logs, incluindo:

- **Logs de Aplicação**: Registram eventos dentro da aplicação.
- **Logs de Sistema**: Monitoram eventos no nível do sistema operacional.
- **Logs de Acesso**: Registram solicitações recebidas por servidores.
- **Logs de Erro**: Capturam erros e exceções.

## Logs no Chatbot

### Logs de Erro

Os logs de erro no chatbot são acionados por meio da utilização do `try` e `catch`, onde o `catch` é responsavel por mandar algum tratamento do erro ocorrido. No chatbot, os logs de erros são enviandos diretamente para o usuário para ajudar na solução do problema.

- **Exemplo:**

```javascript
const handleCreateUser = async (message: Message, client: Client) => {
	try {
		message.reply(`Olá, eu sou o Vallet, tudo bem?`);
		await delay(1000);

		client.sendMessage(message.from, "Para que eu possa te ajudar, preciso que você crie uma conta em nosso sistema.");

		await delay(1000);

		client.sendMessage(message.from, "Para isso, preciso que você me informe seu nome completo, por favor.");

		const newUser: PrismaUser = {
			id: uuidv4(),
			name: "",
			cellPhone: message.from,
			requestState: 0,
			role: [Role.LEAD],
			createdAt: new Date()
		};
		userService.createAccountUser(newUser);
	} catch (error: any) {
		console.error("An error occured", error);
		message.reply("An error occured, please contact the administrator. (" + error.message + ")");
	}
};
```

O código acima é responsavel por criar um novo usuário no sistema, caso ocorra algum erro, o `catch` irá tratar o erro e enviar uma mensagem para o usuário.

### Logs de Interação do Usuário

Os logs de interação do usuário são rastreados por meio de uma variavel presente no banco de dados, chamada `requestState` que é responsavel por armazenar o estado atual do usuário. Essa variavel é atualizada a cada interação do usuário com o chatbot. Esses logs pode ser usuado para a analise de dados, pois é possivel saber quais são as interações mais comuns do usuário com o chatbot.

- **Legenda dos estados do USER:**

1. `0`: Estado inicial do usuário sem cadastro.
2. `1`: Estado de espera de resposta do usuário com o menu.
3. `2`: Estado de espera de confirmação do usuário com o menu.
4. `3`: Estado de espera de confirmação de nova peça.
5. `4`: Estado de espera de confirmação de status de pedido.
6. `5`: Estado de espera de confirmação de cancelar pedido.
7. `6`: Estado de espera de confirmação de atualizar nome do usuário.

- **Legenda dos estados do LEAD:**

1. `0`: Estado inicial do usuário sem cadastro.

- **Legenda dos estados do ADMIN:**

1. `0`: Estado inicial do usuário sem cadastro.
2. `1`: Estado de espera de resposta do usuário com o menu.
3. `2`: Estado de espera de confirmação do usuário com o menu.
4. `3`: Estado de espera de confirmação de nova ponto.
5. `4`: Estado de espera de confirmação de dar acesso a um usuário.
