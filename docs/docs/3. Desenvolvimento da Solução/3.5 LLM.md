# LLM (Large Language Models)

Large Language Models (LLMs) como o ChatGPT 3.5 Turbo são modelos avançados de processamento de linguagem natural desenvolvidos pela OpenAI. Esses modelos são treinados em vastos conjuntos de dados e são capazes de realizar uma variedade de tarefas de linguagem, desde responder perguntas até criar conteúdo original. O ChatGPT 3.5 Turbo é uma versão aprimorada que oferece respostas mais rápidas e precisas.

## Uso do ChatGPT 3.5 Turbo no WhatsApp Chatbot

Para o projeto, foi realizado a integração do ChatGPT 3.5 Turbo em uma aplicação, destacando sua utilização para processar e responder a perguntas em tempo real. Abaixo, detalhamos os principais componentes e seu funcionamento:

### Inicialização da API do OpenAI

```javascript
export function initOpenAI() {
	openai = new OpenAIApi(
		new Configuration({
			apiKey: getConfig("gpt", "apiKey")
		})
	);
}
```

- **OpenAIApi**: Inicializa as configurações necessárias para interagir com o modelo GPT-3.5 Turbo.
- **Configurações**: Define parâmetros como `temperature`, `top_p`, e `max_tokens`, que influenciam o estilo e a extensão das respostas geradas pelo modelo.

### Leitura de Pontos

No contexto do projeto a ideia inicial era que um arquivo `.txt` com os pontos fosse lido e a partir disso fosse feita a extração das coordenadas. Porém, o grupo percebeu que seria mais interessante que o usuário pudesse enviar uma mensagem dizendo onde está a partir de uma lista que o usuário do tipo `admin` conseguisse cadastrar, evitando manutenções desnecessárias no código e a partir disso fosse feita a extração das coordenadas.

- **Exemplo de Cadastro de Pontos:**
  
- **Exemplo de Extração de Pontos:**



### Processamento de Perguntas com o ChatGPT

Uma vez inicializada a API, o ChatGPT pode ser utilizado para processar perguntas e gerar respostas. O código abaixo demonstra o processo de processamento de perguntas e geração de respostas utilizado para encontrar as coordenadas de um ponto.

```javascript
export async function getPointOpenAI(message: Message, points) {
	let prompt =  "Responda a pergunta abaixo com base no contexto para encontrar as coordenadas do lugar. Fique atento para possíveis variações no nome quando o usuário perguntar.Sempre responda na língua que o usuário se comunicar. Sempre dê as coordenadas no formato ([x], [y], [z])"
	let jsonPoints = JSON.stringify(points)
		
	let question = `Lista de pontos: ${jsonPoints}. Pergunta: Identifique a responsta do usuário com base na lista de pontos Resposta: ${message.body} e depois coloque as coordenadas do ponto em formato de float.`


	const response = await openai.createChatCompletion({
		model: 'gpt-4',
    	messages: [{role: 'system', content: prompt}, { role: 'user', content: question } ],
	
	});

    return response.data.choices[0].message?.content;
}
```

- **Geração do Prompt**: Constrói um prompt baseado na mensagem recebida e na lista de pontos, instruindo o modelo sobre como responder. O prompt é uma string que contém o contexto e a pergunta, e é utilizado para gerar a resposta, no exemplo acima, utilizamos a role `system` para o contexto e `user` para a pergunta.
- **Interpretação de Resposta**: Envia o prompt para o ChatGPT 3.5 Turbo e recebe a resposta, que é processada para extrair informações úteis.


### Extração de Informações da Resposta

Para a extração de informações da resposta, utilizamos uma expressão regular para extrair as coordenadas do formato ([x], [y], [z]) da resposta. O código abaixo demonstra o processo de extração de informações utilizado para encontrar as coordenadas de um ponto.


```javascript
let pointResponse = response.data.choices[0].message?.content;

	const regex: RegExp = /-?\d+(?:\.\d+)?,\s*-?\d+(?:\.\d+)?,\s*-?\d+(?:\.\d+)?/gi;
    const match = pointResponse?.match(regex);
	const socket = io("http://10.128.64.39:3000");
    if (match) {
		match.forEach(coordinateString => {
			// Splitting the matched string into individual numbers
			const parts = coordinateString.split(',').map(part => parseFloat(part.trim()));
			const [x, y, z] = parts;
			socket.emit("send_points", {x, y, z});
			message.reply(pointResponse as any);

		});
    }
	else{
		message.reply("Não consegui encontrar o ponto. Tente novamente.")
	}
```

- **Extração de Coordenadas**: Utiliza uma expressão regular para extrair coordenadas do formato ([x], [y], [z]) da resposta.
- **Comunicação com Socket**: Envia as coordenadas extraídas para um servidor via socket, indicando uma aplicação em tempo real.
- **Feedback ao Usuário**: Responde ao usuário com a informação extraída ou uma mensagem de erro caso as coordenadas não sejam encontradas.

## Considerações de Implementação do ChatGPT 3.5 Turbo

1. **Precisão do Modelo**: Garantir que o modelo esteja bem treinado e capaz de interpretar e responder a uma ampla variedade de consultas com precisão.
2. **Segurança e Privacidade**: Tomar medidas para proteger dados sensíveis que possam ser processados pelo modelo.
3. **Gerenciamento de Erros**: Implementar um robusto sistema de tratamento de erros para lidar com respostas inesperadas ou erros de processamento.

## Conclusão

O ChatGPT 3.5 Turbo representa um avanço significativo na área de LLMs, oferecendo respostas rápidas e precisas para uma variedade de tarefas de processamento de linguagem natural. A integração dessa tecnologia em aplicações, como demonstrado no código fornecido, pode melhorar significativamente a interação usuário-máquina e a eficiência do processamento de dados. É fundamental, no entanto, garantir a precisão, segurança e privacidade ao trabalhar com esses modelos avançados.
