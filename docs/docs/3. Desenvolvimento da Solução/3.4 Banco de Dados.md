# Banco de Dados

Um **banco de dados** é um conjunto de dados organizados de forma estruturada, armazenados eletronicamente em um sistema de computador. Eles são essenciais para armazenar e gerenciar grandes quantidades de informações de forma eficiente.

## O que é um ORM?

**ORM** (Object-Relational Mapping) é uma técnica de programação que converte dados entre sistemas incompatíveis usando objetos orientados a objetos. Facilita a manipulação de dados em bancos de dados relacionais.

## Introdução ao Prisma

**Prisma** é um ORM moderno para Node.js e TypeScript, que simplifica o processo de consulta e manipulação de dados em bancos de dados. Ele proporciona um ambiente de desenvolvimento mais intuitivo e seguro.

## Uso do PostgreSQL com Prisma

Este projeto utiliza **PostgreSQL**, um sistema de banco de dados relacional, com o backend. Prisma oferece suporte completo para PostgreSQL, permitindo operações de banco de dados eficientes e seguras.

## Estrutura do Modelo de Dados

O esquema de banco de dados definido inclui os seguintes modelos:

- **User**: Armazena informações do usuário, incluindo ID, nome, celular, estado da solicitação e papel.
- **Tool**: Define uma ferramenta com atributos como ID, código, nome, preço, tags e quantidades mínimas e máximas.
- **Order**: Representa um pedido, relacionando-se com as ferramentas e usuários.
- **Point**: Define um ponto com atributos como ID, nome e coordenadas.
- **Role**: Enumeração que define diferentes papéis de usuários, como LEAD, USER e ADMIN.

## Conectando-se ao Banco de Dados

Para se conectar ao banco de dados, Prisma utiliza uma URL de conexão, definida na chave `DATABASE_URL` no arquivo `.env`.

```javascript
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

A URL de conexão é definida no arquivo `.env` como:

```javascript
DATABASE_URL = "postgresql://janedoe:mypassword@localhost:5432/mydb?schema=sample"
```

## Executando Comandos Prisma

### Prisma Generate

O comando `prisma generate` gera ou atualiza o cliente Prisma, que é usado para acessar o banco de dados em seu código de aplicativo.

```
npx prisma generate
```

### Prisma DB Push

O comando `prisma db push` é usado para atualizar o esquema do banco de dados para corresponder ao esquema Prisma definido em seu arquivo de esquema Prisma.

```
npx prisma db push
```

## Diagrama do Banco de Dados - v1.0

![Alt text](../../static/img/prisma-erd-v1.svg)
